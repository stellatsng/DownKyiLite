# 更新日志
## `2024/10/10` DownkyiLite alpha
* [优化] 更换体积巨大的ffmpeg为mp4box，使程序包大大减小。
## `2023/12/10` v1.6.1

* [优化] 如果存在下载完成列表，弹出选择框是否再次下载。
* [修复] 更新wbi签名算法，解决无法解析下载视频的问题。

## `2023/12/09` v1.6.0

* [优化] 下载列表弹出框。
* [优化] 添加任务栏图标。
* [优化] 视频流API、视频详细信息API。
* [修复] 文件名导致的闪退问题。
* [修复] 程序反复读取设置文件的问题。
* [修复] 修复扫码登录的问题。
* [修复] 在下载设置窗口界面取消或关闭窗口之后导致的DownKyi闪退问题 #907。

## `2023/05/24` v1.5.9

* [新增] 下载完成系统提示。
* [修复] UP主个人空间访问。

## `2023/04/30` v1.5.8

* [新增] 视频详情页搜索功能。
* [优化] 确认下载路径之前检查盘符是否存在。
* [优化] 弹出框的UI。
* [优化] 音质描述【普通音质有3档质量，但不是固定的320K或192K，因此仅用高中低表述，以免产生误解】。
* [修复] 下载管理在只下载音频的情况下点击打开文件夹无响应。
* [修复] 解决tabId溢出的问题。

## `2023/02/18` v1.5.7

* [新增] 自定义UserAgent。
* [新增] 程序检查更新。
* [优化] 下载前检测无效的下载目录。
* [优化] 更新依赖版本。
* [优化] 输出Aria2错误信息到UI。
* [修复] 默认编码为AVC，但画质为杜比视界时，不会自动选中HEVC编码的问题。
* [修复] 删除下载项时内建下载器崩溃的问题。

## `2023/01/06` v1.5.6

* [修复] 文件名包含非法字符。
* [修复] 多线程下载的bug。
* [修复] 弹幕无法下载的bug。

## `2022/11/06` v1.5.5

* [优化] 更新分区列表。
* [优化] 更新依赖包。
* [新增] 关注和粉丝页面。
* [修复] 命名格式无AV1编码的问题。
* [修复] 优先解析视频编码顺序为AV1、HEVC、AVC。
* [修复] 自定义aria服务器监听端口设置无效的问题。

## `2022/10/16` v1.5.4

* [新增] 支持AV1编码视频。
* [新增] 支持Hi-Res无损音频格式。
* [新增] 支持UP主用户空间的合集和列表。
* [新增] 支持自定义aria服务器。
* [新增] 音视频分离支持多选。
* [修复] 视频无杜比视界时支持杜比全景声。

## `2022/06/05` v1.5.3

* [优化] 封面命名。
* [新增] 启用https控制。
* [新增] 支持出行分区。
* [新增] 下载管理页面入口。
* [修复] 批量操作时偶尔崩溃的问题。
* [修复] 监听剪贴板失效的问题。

## `2022/05/09` v1.5.2

* [优化] 更新依赖版本。
* [新增] 内建下载器。
* [新增] 下载器切换设置。
* [修复] 问题 SSL/TLS handshake failure。

---

* `2022/05/09` v1.5.1
    1. [优化] 当复制视频详情页的输入框中的字符时，不读取剪贴板内容。
    2. [优化] Aria下载器添加header。
    3. [新增] 向下载管理页面添加弹窗提示。
    4. [新增] 文件命名模块中序号格式设置。
    5. [新增] 支持WebP图像。
    6. [修复] 未获取到杜比全景声却仍然显示出此选项的问题。
    7. [修复] 运动分区无法显示的问题。
    8. [修复] 文件名异常导致的下载失败。
    9. [修复] 偶尔VideoSection重复的问题。

* `2022/04/04` v1.5.0
    1. [优化] 跳过数据库中的不完整数据。
    2. [优化] 文件命名格式设置支持拖拽。
    3. [修复] 下载完成后的动作设置无效的问题。
    4. [修复] 视频BV1rr4y1i74o无法加载的问题。
    5. [修复] 下载内容设置偶尔不生效的问题。

* `2022/03/26` v1.5.0-alpha7
    1. [优化] 批量下载时过滤UGC、其他季或花絮内容。
    2. [优化] 保存下载视频内容到设置。
    3. [优化] 更新ffmpeg为gpl版本。
    4. [优化] 默认的aria的文件预分配改为NONE。
    5. [新增] “解析后自动下载已解析视频”设置。
    6. [修复] 只下载音频失败的问题。
    7. [修复] Settings被占用无法读取的问题。
    8. [修复] 因路径导致无法下载的问题。
    9. [修复] 无法正确关闭数据库的问题。

* `2022/03/20` v1.5.0-alpha6
    1. [修复] 一些已知问题。

* `2022/03/19` v1.5.0-alpha5
    1. [优化] 文件命名格式中，时间格式可设置。
    2. [修复] 数据库异常锁定的问题。
    3. [修复] 视频标题和分P标题相同时找不到下载文件的问题。
    4. [修复] 150%缩放下的窗口不超出屏幕。
    5. [修复] 其他已知问题。

* `2022/03/13` v1.5.0-alpha4
    1. [优化] 配置文件目录改为当前程序目录。
    2. [修复] 部分UI显示。
    3. [修复] 因数据库中的重复内容导致的闪退问题。
    4. [修复] 其他已知问题。

* `2022/03/12` v1.5.0-alpha3
    1. [修复] 当用户性别为保密时，程序闪退的问题。
    2. [修复] 批量下载UP主视频时，程序偶尔闪退的问题。
    3. [修复] 其他已知问题。

* `2022/03/07` v1.5.0-alpha2
    1. [优化] 重构程序架构，解决一些已知问题。
    2. [优化] 界面UI的显示与操作。
    3. [新增] 文件命名格式：avid、bvid、cid、UP主信息、视频发布时间。
    4. [修复] 视频音质列表导致的闪退问题。
    5. [修复] 图片下载导致的闪退问题。

* `2022/03/05` v1.5.0-alpha1
    1. [优化] 重构程序架构，解决一些已知问题。
    2. [新增] 最高支持8K视频。
    3. [新增] 支持杜比全景声和杜比视界。
    4. [新增] 支持字幕下载。
    5. [新增] 支持部分短链接（如 <https://b23.tv/BV17x411w7KC> ）。
    6. [新增] 下载内容可选，可根据需要选择下载视频、音频、弹幕、字幕、封面。
    7. [新增] 下载文件命名模块，可自主设置文件名。

* `2021/06/12` v1.4.0
    1. [修复] 视频无封面时崩溃的问题。
    2. [优化] 视频分区代码与图标。
    3. [优化] 屏蔽频道中的失效视频。
    4. [优化] 二维码登录逻辑。
    5. [新增] 弹幕下载（借鉴并重写于项目 [niconvert](https://github.com/muzuiget/niconvert)）。
    6. [新增] 弹幕样式设置。
    7. [新增] 下载弹幕、下载封面的选项。

* `2021/04/27` v1.3.8
    1. [修复] FLV视频只有1个分段时下载失败的问题。
    2. [修复] UP主视频页面闪退的问题。
    3. [修复] 电视剧图标丢失的问题。
    4. [新增] UP主视频页面下载全部视频的按钮。

* `2021/03/28` v1.3.7
    1. [修复] 播放数为空白的视频存在时，整页视频列表无法加载的问题。
    2. [修复] 特殊字符（控制字符、末尾空格等）导致的下载失败。
    3. [修复] 由于某些封面图片metadata损坏导致的程序崩溃。
    4. [修复] 监听剪贴板数据异常报错的问题。
    5. [优化] 部分界面显示。
    6. [优化] 程序逻辑。
    7. [新增] 监听剪贴板和自动解析的设置持久化。
    8. [新增] 列表支持shift&ctrl多选。
    9. [新增] 下载中列表重试按钮。

* `2021/03/04` v1.3.6
    1. [修复] 下载FLV时失败的问题。
    2. [修复] 主页的登录信息更新不及时的问题。
    3. [优化] 主页下方按钮居中。
    4. [优化] 首页搜索框添加搜索按钮，点击可进行搜索。
    5. [新增] 监听剪贴板。
    6. [新增] 已下载视频列表排序。
    7. [新增] 下载管理页面增加全部暂停、全部开始、全部删除。

* `2021/02/21` v1.3.5
    1. [修复] 分P标题相同时会下载失败的问题。
    2. [修复] 个人空间中的头像可能显示不全的问题。
    3. [优化] 订阅页面采用分页显示。
    4. [优化] 增强程序健壮性。
    5. [优化] 部分界面UI。
    6. [优化] 视频详情页获取视频后不自动解析下载链接。
    7. [新增] 视频详情页“自动解析”选项，“解析视频”按钮，列表右键菜单“解析”。
    8. [新增] 视频详情页支持输入av号和BV号。
    9. [新增] 视频详情页的UP主头像增加进入用户空间的入口。
    10. [新增] 历史记录和稍后再看的up主头像增加进入用户空间的入口。

* `2021/02/10` v1.3.4
    1. [修复] 修复在未登录时进入UP主用户空间，程序崩溃的问题。
    2. [优化] 更新视频分区。
    3. [优化] 视频数为0的频道不显示。
    4. [优化] 部分界面UI。

* `2021/01/30` v1.3.3
    1. [修复] 输入avid和bvid可能无法解析的问题。
    2. [优化] 程序的一些显示。
    3. [优化] 程序核心代码结构。
    4. [新增] 访问用户空间。
    5. [新增] UP主投稿视频列表展示。
    6. [新增] UP主频道列表展示。
    7. [新增] 意见反馈入口，将进入github的issue页。

* `2021/01/05` v1.3.2 beta
    1. [修复] 向Aria添加下载时参数错误问题。
    2. [修复] 分P标题为空时，标题为总标题+数字。
    3. [优化] 更新视频分区。
    4. [优化] 文件夹、订阅、稍后再看的健壮性。

* `2021/01/01` v1.3.1 beta
    1. [修复] Aria2c下载时出现503错误的问题。
    2. [修复] 选择文件夹时，若取消选择仍然会添加到下载的问题。
    3. [修复] 标题中含有转义字符时的问题。
    4. [修复] 其他已知问题。
    5. [优化] 启动时先杀死以开启的Aria2c进程。
    6. [优化] 关于页面添加github链接。

* `2020/12/26` v1.3.0 beta
    1. [新增] 使用Aria下载器。
    2. [新增] 暂停、继续、删除下载项功能。
    3. [新增] 下载时自动下载视频封面。
    4. [新增] B站助手工具，包括av与bv互转，弹幕发送者查询。
    5. [优化] 工具箱页面的按钮的样式。
    6. [优化] 更新QRCoder版本到1.4.1。
    7. [新增] 在视频详情页添加解析后自动下载所有选项。
    8. [新增] 支持avid和bvid输入。
    9. [修复] 在没有解析完网址的时候粘贴新的网址会出现闪退的问题。
    10. [优化] 下载管理上方控制面板是否显示根据已下载视频数量动态变化。
    11. [新增] 下载列表的历史记录，重启程序后恢复下载。
    12. [新增] 视频详情页的封面增加右键菜单：复制封面图片、复制封面url。
